{% extends "base.html" %}
{% block content %}

    <body>
    <!-- //portfolio -->
    <section class="w3l-apply-6">
        <!-- /apply-6-->
        <div class="apply-info py-5">
            <div class="containerSlim py-lg-5">
                <div class="apply-grids-info widthRegi">
                    <form id="regiForm" class="row g-3">
                        <div class="input-group mb-3">
                            <input type="hidden" name="user_id" id="user_id"
                                    {% if user %} value="{{ user['user_id'] }}" {% endif %} class="form-control">
                            <div class="form-group left">
                                <input type="text" hidden name="role" id="role" class="form-control"
                                       placeholder="" value="2">
                                <label for="firstname">*First name</label>
                                <input type="text" name="firstname" id="firstname"
                                        {% if user %} value="{{ user['first_name'] }}" {% endif %} class="form-control">
                            </div>
                            <div class="form-group right">
                                <label for="lastname">*Last name</label>
                                <input type="text" name="lastname"
                                        {% if user %} value="{{ user['last_name'] }}" {% endif %}
                                       id="lastname" class="form-control">
                            </div>
                        </div>

                        {% if not user %}
                            <div class="input-group mb-3">
                                <div class="form-group left">
                                    <label for="password">*Password</label>
                                    <input type="password" name="password"
                                           class="form-control" id="password">
                                </div>
                                <div class="form-group right">
                                    <label for="alternativeName">*Alternative name</label>
                                    <input type="text" name="alternativeName" id="alternativeName" class="form-control">
                                </div>
                            </div>

                        {% else %}
                            <div class="form-group left">
                                <label for="alternativeName">*Alternative name</label>
                                <input type="text" name="alternativeName" id="alternativeName"
                                        {% if user %} value="{{ user['alternative_name'] }}" {% endif %}
                                       class="form-control">
                            </div>
                        {% endif %}
                        <div class="input-group mb">
                            <div class="form-group left">
                                <label>*Student Number</label>
                                <input type="text" name="studentNo" id="studentNo"
                                        {% if user %} value="{{ user['student_id_no'] }}" readonly  {% endif %}
                                       class="form-control">
                            </div>
                            <div class="form-group right">
                                <label>*Phone</label>
                                <input type="text" name="phone" id="phone"
                                        {% if user %} value="{{ user['phone'] }}" {% endif %}
                                       class="form-control">
                            </div>
                        </div>
                        <div class="input-group mb">
                            <div class="form-group left">
                                <label>*Email</label>
                                <input type="email" name="email" class="form-control"
                                        {% if user %} disabled value="{{ user['email'] }}" {% endif %}
                                       id="email">
                            </div>
                            <div class="form-group right">
                                <label>*Date of Birth</label>
                                <input type="date" name="dob" class="form-control"
                                        {% if user %} value="{{ user['dateofbirth'] }}" {% endif %}
                                       id="dob">
                            </div>
                        </div>
                        <div class="input-group mb">
                            <div class="form-group left">
                                <label>*Gender</label>
                                <select name="gender" id="gender">
                                    <option value="0"  {% if user and user['gender']== 0 %}
                                            selected  {% endif %}>
                                        Male
                                    </option>
                                    <option value="1" {% if user and user['gender']== 1 %}
                                            selected  {% endif %}>
                                        Female
                                    </option>
                                    <option value="2" {% if user and user['gender']== 2 %}
                                            selected  {% endif %}>
                                        Neutral
                                    </option>
                                </select>

                            </div>
                        </div>
                        {% if user %}
                            <div class="input-group mb">
                                <div class="form-group left">
                                    <label>*Skills</label>
                                    <div class="input-group" style="width: 600px" id="inpChkBox">
                                        {% for sk in studentSkills %}
                                            <div class="form-check form-check-inline" >
                                                <input type="checkbox" id="{{ sk.id }}"
                                                        {% if sk['student_id'] %}
                                                       checked
                                                        {% endif %}
                                                       class="form-check-input chkBoxMargin"
                                                       name="stu_skills"
                                                       value="{{ sk['id']  }}">{{ foo }}

                                                <label class="form-check-label" for="flexCheckDefault">
                                                    {{ sk.skill_name }}
                                                </label>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                         {% if user %}
                        <div class="input-group mb">
                            <div class="form-group left">
                                <label class="mb-2" for="cv">*CV</label>
                                <input type="file" id="userCV" name="userCV" onchange="uploadFile()">
                                <span id="text" name="fileLocation"> {% if user and user['cv'] %}
                                    <a href="/download/{{ user['cv'] }}"> {{ user['cv'] }} </a>{% endif %}</span>
                        </div>
                        {% endif %}
                          <div class="input-group mb">
                            <div class="form-group left">
                                {% if user %}
                                    <input type="button" class="btn btn-primary" onclick="addOrUpdateUser(2)"
                                           value="Update"
                                           name="submitBtn"/>
                                {% else %}
                                    <input type="button" class="btn btn-primary" onclick="addOrUpdateUser(2)"
                                           value="JOIN NOW"
                                           name="submitBtn"/>
                                {% endif %}
                                <button type="reset" class="btn btn-primary" href="register">Reset</button>
                            </div>

                        </div>
                    </form>

                </div>
            </div>
        </div>
        </div>
    </section>

    <!-- //footer -->
    </body>
    <script>
        $(function () {
            {% if user %}
                let $cv = $("#file");
                console.log($cv)
                var ifCV = '{{ user['cv'] }}'
                if (ifCV) {
                    $cv.html("")
                }
            {% endif %}
        })
    </script>


{% endblock %}